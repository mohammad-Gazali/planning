
{% extends 'base.html' %}
{% block title %} الكثافة {% endblock %} {% block content %}

<div >

    <div class="table-responsive">
        <table id="myTable" class="table table-hover table-bordered table-striped table-sm text-center table-white">
         <caption style="display: table-caption;text-align: center;caption-side: top;;font-size: x-large;">معدل الكثافة  (طالب/فصل)</caption>
            <thead>
                <tr>
                    <th onclick="sortTable(0)"> م <i class="bi bi-caret-up-fill second-arrow-up"></i><i class="bi bi-caret-down-fill second-arrow-down"></i> </th>
                    <th onclick="sortTable(1)"> المكتب </th>
                    <th> معدل الكثافة لرياض الأطفال </th>
                    <th> معدل الكثافة  للمرحلة الابتدائية </th>
                    <th> معدل الكثافة  للمرحلة المتوسطة </th>
                    <th> معدل الكثافة  للمرحلة الثانوية </th>
                    <th onclick="sortTable(2)">  معدل الكثافة <i class="bi bi-caret-up-fill first-arrow-up"></i><i class="bi bi-caret-down-fill first-arrow-down"></i></th>
                </tr>
            </thead>
            <tbody>

            {% for i in d %}

                <tr>
                    <td>{{i.office_nu}}</td>
                    <td>{{i.office_name}}</td>
                    <td>{{i.childhold_density}}</td>
                    <td>{{i.primary_density}}</td>
                    <td>{{i.elementry_density}}</td>
                    <td>{{i.secondary_density}}</td>
                    <td>{{i.office_density}} </td>
                </tr>
            {%endfor%}
        </tbody>

        </table>
    </div>



</div>

<script>
    function sortTable(columnIndex) {
        
           var table, rows, switching, i, x, y, shouldSwitch, dir, switchCount = 0;
        table = document.getElementById("myTable");
        switching = true;
        dir = "asc";
        if(columnIndex===2){
           let arrowUp=document.querySelector('.first-arrow-up')
           let arrowDown=document.querySelector('.first-arrow-down')

           if(arrowUp.classList.contains('d-none')){
            arrowUp.classList.remove('d-none')
            arrowDown.classList.add('d-none')
           }
            else{
            arrowUp.classList.add('d-none')
            arrowDown.classList.remove('d-none')
           }

        }
        if(columnIndex===0){
           let arrowUp=document.querySelector('.second-arrow-up')
           let arrowDown=document.querySelector('.second-arrow-down')

           if(arrowUp.classList.contains('d-none')){
            arrowUp.classList.remove('d-none')
            arrowDown.classList.add('d-none')
           }
            else{
            arrowUp.classList.add('d-none')
            arrowDown.classList.remove('d-none')
           }

        }
        while (switching) {
            switching = false;
            rows = table.rows;

            for (i = 1; i < rows.length - 1; i++) {
                shouldSwitch = false;
                x = parseFloat(rows[i].getElementsByTagName("td")[columnIndex].textContent);
                y = parseFloat(rows[i + 1].getElementsByTagName("td")[columnIndex].textContent);

                if ((dir === "asc" && x > y) || (dir === "desc" && x < y)) {
                    shouldSwitch = true;
                    break;
                }
            }

            if (shouldSwitch) {
                rows[i].parentNode.insertBefore(rows[i + 1], rows[i]);
                switching = true;
                switchCount++;
            } else {
                if (switchCount === 0 && dir === "asc") {
                    dir = "desc";
                    switching = true;
                }
            }
        }
    }
</script>


{% endblock %}